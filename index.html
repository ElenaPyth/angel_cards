<!doctype html>
<html lang="ru">
<head>
  <meta charset="utf-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1, viewport-fit=cover" />
  <title>Карты с посланиями — Ангельский Друг</title>
  <script src="https://telegram.org/js/telegram-web-app.js"></script>
  <link rel="stylesheet" href="./styles.css" />
</head>
<body>
  <div id="app" class="container">
    <header class="topbar">
      <h1>Карты с посланиями</h1>
      <button id="btn-history" class="btn ghost">История</button>
      <!-- Эта кнопка меняет поведение в зависимости от экрана:
           Дом/Списки: открывает Избранное,
           экран карты: добавляет текущую карту «В избранное». -->
      <button id="btn-fav" class="btn ghost">Избранное</button>
    </header>

    <main id="main">
      <!-- Домашний экран -->
      <section id="home">
        <p class="lead">
          Внимательно подумай о своём вопросе, задай его ангелам и позволь выпасть карте из колоды.
          Читая значение каждой карты, отмечай свои мысли и чувства.
        </p>

        <p class="hint">Нажми, чтобы вытянуть карту дня</p>

        <button id="btn-draw" class="btn btn-primary btn-lg">Вытянуть карту</button>

        <!-- Дополнительная кнопка «Избранное» под жёлтой -->
        <button id="btn-fav-home" class="btn btn-lg">Избранное</button>

        <div class="home-actions">
          <button id="btn-how"   class="btn pill">Инструкция по работе с картами</button>
          <button id="btn-guide" class="btn pill">Как пользоваться картами</button>
          <button id="btn-help"  class="btn pill">Чем я могу помочь тебе</button>
        </div>
      </section>

      <!-- Экран карточки -->
      <section id="card" class="hidden">
        <div class="card-media">
          <img id="card-img" alt="Карта" />
        </div>

        <div class="card-content">
          <h2 id="card-title" class="card-title"></h2>
          <p id="card-msg" class="message"></p>
        </div>

        <div class="actions">
          <button id="btn-again" class="btn btn-primary">Ещё раз</button>
          <!-- Внизу под картой кнопка открытия избранного -->
          <button id="btn-open-fav" class="btn">Избранное</button>
          <!-- Кнопка запуска бесплатной практики из миниапа -->
          <button id="btn-practice" class="btn">Пройти бесплатную практику</button>
          <button id="btn-share" class="btn ghost">Поделиться</button>
        </div>
      </section>

      <!-- История / Избранное -->
      <section id="list" class="hidden">
        <h2 id="list-title">История</h2>
        <div class="list-actions">
          <button id="btn-clear" class="btn ghost hidden">Очистить историю</button>
        </div>
        <div id="list-wrap" class="list-wrap"></div>
        <button id="btn-back" class="btn ghost">Назад</button>
      </section>
    </main>

    <footer class="foot">
      <button id="btn-about" class="btn ghost small">О проекте</button>
    </footer>
  </div>

  <!-- Шаблон элемента списка -->
  <template id="item-tpl">
    <div class="item" data-id="">
      <img class="thumb" alt="" />
      <div class="meta">
        <div class="ttl"></div>
        <div class="dt"></div>
      </div>
      <button class="del hidden" type="button" title="Удалить из избранного">×</button>
    </div>
  </template>

  <!-- Модалки -->
  <div id="modal-how" class="modal hidden">
    <div class="modal-card">
      <button id="btn-close-how" class="modal-x" aria-label="Закрыть">✕</button>
      <h3>Инструкция по работе с картами</h3>
      <div class="modal-body">
        <p>Ангелы рядом всегда, даже если ты их не замечаешь. Они уважают твою свободу воли, поэтому помощь приходит, когда ты просишь об этом.</p>
        <p>Проси конкретно и коротко, будто вы одна команда. Так сигналы от высших сил доходят быстрее, а ответы легче распознать.</p>
        <p>Когда просишь поддержки, жизнь становится легче: совпадения помогают, внутри спокойнее, появляется ясность следующего шага.</p>
      </div>
    </div>
  </div>

  <div id="modal-guide" class="modal hidden">
    <div class="modal-card">
      <button id="btn-close-guide" class="modal-x" aria-label="Закрыть">✕</button>
      <h3>Как пользоваться картами</h3>
      <div class="modal-body">
        <p>Карты, безопасный способ настроиться на высшие силы и услышать подсказку. Выпавшая карта резонирует с твоим запросом, так работает притяжение.</p>
        <p>Когда стресс мешает слышать, карты обходят «шум» и помогают получить ясный ответ.</p>
        <p><strong>Практика:</strong> подумай о вопросе, попроси поддержки, вытяни карту. Читая значение, отмечай мысли и чувства, в них твой ответ и шаг к действию.</p>
      </div>
    </div>
  </div>

  <div id="about-modal" class="modal hidden">
    <div class="modal-card">
      <button id="btn-close-about" class="modal-x" aria-label="Закрыть">✕</button>
      <h3>Чем я могу помочь тебе</h3>
      <div class="modal-body">
        <p>Это мягкая практика внимательности и чувствительности. Здесь ты тренируешь контакт с собой и с высшими силами. Не медицина и не диагностика.</p>
      </div>
    </div>
  </div>

  <script src="./app.js"></script>
</body>
</html>
